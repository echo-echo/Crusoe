<template name = "feed">
  <!-- Modal Trigger -->
  <a class="waves-effect waves-light btn-large write feed-write">Write Message</a>

  <div class = "feed-content">
		<ul class="collection">
			{{#each messages.visible}}
		    {{> feedMessage}}
		  {{/each}}

      {{#each messages.hidden}}
        {{> feedMessage}}
      {{/each}}
		</ul>
	</div>
</template>

<template name="feedMessage">
		<li class="collection-item avatar feedMessage">
      {{#if visible}}
			<i class="mdi-communication-email circle readable lighten-2"></i>
      {{else}}
		  <i class="mdi-action-lock circle grey darken-1"></i>
      {{/if}}
            <p class="proximity"> {{proximityString}}</p>
            <p>{{origin}}</p>
            <p data-livestamp="{{createdAt}}"></p>
            <span class="mdi-content-drafts"> {{opens}} </span>
            <span class="mdi-action-thumb-up"> {{likes.length}}</span>
    </li>
</template>

<template name="messageModal">
  <div id="map-message-modal" class="modal modal-box c-modal">
    <div class="modal-content">
      <a href="#" class="right modal-close">close</a>
      <div class="view-msg-container">
        {{#if message.visible}}

          <p>{{message.text}}</p>
          {{#if message.key}}
            <div id="display-photo"></div>
          {{/if}}
          <div id="display-streetview"></div>

        {{else}}
        <h4>Message is too far away to view.</h4>
        {{/if}}

        <div class="message-info">
          <h6 data-livestamp="{{message.description}}"></h6>
          <h6>Origin: {{message.origin}}</h6>
          <h6>Opens: {{message.opens}}</h6>
        </div>

        <div class="message-info toggle-panel">
          <i class="mdi-action-launch streetview"></i>
        </div>
      </div>
    </div>
    {{#if isUser }}
    <div class="modal-footer">
      <button class ="save btn-flat">
        <i class ="mdi-content-add-box"> tag message</i>
      </button>
      <button class ="btn-flat like">
        <i class ="mdi-action-thumb-up"> {{message.likes.length}}</i>
      </button>
    </div>
    {{/if}}
  </div>
</template>

<template name="writeMessage">
  <!-- Modal Structure -->
  <div id="write" class="modal modal-box c-modal">
    <div class="modal-content">
      <h4>Write Message</h4>
      <textarea></textarea>
      <input type="file" class="media-upload">
      <i class="medium mdi-image-camera-alt takephoto"></i>
    </div>
    <div class="modal-footer">
    <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat throw">Throw Message</a>
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat submit">Drop Message</a>
    </div>
  </div>
</template>
